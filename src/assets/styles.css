@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --foreground: #363d49;
    --background: #fff;
    --accent: #d93f00;
    --deemphasised: #727780;
    --divider: theme('colors.gray.300');
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --foreground: #d1d6e0;
      --background: #1b1d22;
      --accent: #ff9e66;
      --deemphasised: #81858c;
      --divider: theme('colors.gray.600');
    }

    svg {
      filter: brightness(0.8) contrast(1.2);
    }

    img:not([src*='.svg']) {
      filter: grayscale(40%);
    }
  }

  h1,
  h2,
  h3 {
    @apply mb-1 font-bold;
  }

  h1 {
    @apply text-3xl;
  }

  h2 {
    @apply text-2xl;
  }

  p {
    @apply mb-4;
  }

  a {
    @apply underline text-accent transition-all duration-300;
    text-decoration-color: theme('colors.divider');
  }

  a:focus,
  a:hover,
  a.active {
    text-decoration-color: theme('colors.current');
  }

  @media (prefers-reduced-motion) {
    a {
      @apply transition-none;
    }
  }

  img {
    @apply h-auto max-w-full;
  }

  code {
    @apply text-accent;
  }

  blockquote {
    @apply relative pl-4 m-4 italic border-l-4 border-divider text-deemphasised;
  }

  table {
    @apply w-full;
  }

  thead tr {
    @apply text-left;
  }

  thead th {
    @apply py-2 pr-2;
  }

  thead th:last-child {
    @apply pr-0;
  }

  tbody {
    @apply text-sm;
  }

  tbody tr {
    @apply border-t border-divider;
  }
}

@layer components {
  .meta-text {
    @apply text-xs italic text-deemphasised;
  }

  .subtle-link {
    @apply text-primary hover:text-accent focus:text-accent;
  }

  .inline-bullet,
  .inline-bullet li {
    @apply flex;
  }
  .inline-bullet li:not(:first-of-type):before {
    content: 'â€¢';

    @apply mx-1 list-none text-deemphasised;
  }

  @screen sm {
    .portrait-footer li:nth-child(1) {
      transform: translate(2.3em, 12.3em);
    }
    .portrait-footer li:nth-child(2) {
      transform: translate(-2em, 3.8em);
    }
    .portrait-footer li:nth-child(4) {
      transform: translate(2em, 3.8em);
    }
    .portrait-footer li:nth-child(5) {
      transform: translate(-2.3em, 12.3em);
    }
  }

  /**
   * Dracula Theme originally by Zeno Rocha [@zenorocha]
   * https://draculatheme.com/
   *
   * Ported for PrismJS by Albert Vallverdu [@byverdu]
   * https://github.com/PrismJS/prism-themes/blob/master/themes/prism-dracula.css
   */

  /* code, */
  code[class*='language-'],
  pre[class*='language-'] {
    color: #f8f8f2;
    background: none;
    text-shadow: 0 1px rgba(0, 0, 0, 0.3);
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
    text-align: left;
    white-space: pre;
    word-spacing: normal;
    word-break: normal;
    word-wrap: normal;
    line-height: 1.5;
    -moz-tab-size: 4;
    -o-tab-size: 4;
    tab-size: 4;
    -webkit-hyphens: none;
    -moz-hyphens: none;
    -ms-hyphens: none;
    hyphens: none;

    @apply text-sm;
  }

  /* Code blocks */
  pre[class*='language-'] {
    @apply p-3 my-2 -mx-3 sm:rounded-lg;
    overflow: auto;
  }

  /* :not(pre) > code, */
  :not(pre) > code[class*='language-'],
  pre[class*='language-'] {
    background: #282a36;
  }

  /* Inline code */
  /* :not(pre) > code, */
  :not(pre) > code[class*='language-'] {
    white-space: normal;
    @apply py-0.5 px-1 rounded;
  }

  .token.comment,
  .token.prolog,
  .token.doctype,
  .token.cdata {
    color: #6272a4;
  }

  .token.punctuation {
    color: #f8f8f2;
  }

  .namespace {
    opacity: 0.7;
  }

  .token.property,
  .token.tag,
  .token.constant,
  .token.symbol,
  .token.deleted {
    color: #ff79c6;
  }

  .token.boolean,
  .token.number {
    color: #bd93f9;
  }

  .token.selector,
  .token.attr-name,
  .token.string,
  .token.char,
  .token.builtin,
  .token.inserted {
    color: #50fa7b;
  }

  .token.operator,
  .token.entity,
  .token.url,
  .language-css .token.string,
  .style .token.string,
  .token.variable {
    color: #f8f8f2;
  }

  .token.atrule,
  .token.attr-value,
  .token.function,
  .token.class-name {
    color: #f1fa8c;
  }

  .token.keyword {
    color: #8be9fd;
  }

  .token.regex,
  .token.important {
    color: #ffb86c;
  }

  .token.important,
  .token.bold {
    font-weight: bold;
  }

  .token.italic {
    font-style: italic;
  }

  .token.entity {
    cursor: help;
  }
}
